const offsets = [
    // T
    [
        [[0, -1], [-1, 0],[0, 0],  [1, 0]],
        //   []
        // []<>[]
        [[0, -1], [0, 0], [1, 0], [0, 1]],
        // []
        // <>[]
        // []
        [[-1, 0], [0, 0], [1, 0], [0, 1]],
        // []<>[]
        //   []
        [[0, -1], [-1, 0], [0, 0], [0, 1]]
        //   []
        // []<>
        //   []
    ],
    // I
    [
        [[-1, 0], [0, 0], [1, 0], [2, 0]],
        // []<>[][]
        [[0, -1], [0, 0], [0, 1], [0, 2]],
        // []
        // <>
        // []
        // []
        [[-2, 0], [-1, 0], [0, 0], [1, 0]],
        // [][]<>[]
        [[0, -2], [0, -1], [0, 0], [0, 1]],
        // []
        // []
        // <>
        // []
    ],
    // J
    [
        [[-1, -1], [-1, 0], [0, 0], [1, 0]],
        // []
        // []<>[]
        [[0, -1], [1, -1], [0, 0], [0, 1]],
        // [][]
        // <>
        // []
        [[-1, 0], [0, 0], [1, 0], [1, 1]],
        // []<>[]
        //     []
        [[0, -1], [0, 0], [-1, 1], [0, 1]],
        //   []
        //   <>
        // [][]
    ],
    // L
    [
        [[1, -1], [-1, 0], [0, 0], [1, 0]],
        //     []
        // []<>[]
        [[0, -1], [0, 0], [0, 1], [1, 1]],
        // []
        // <>
        // [][]
        [[-1, 0], [0, 0], [1, 0], [-1, 1]],
        // []<>[]
        // []
        [[-1, -1], [0, -1], [0, 0], [0, 1]],
        // [][]
        //   <>
        //   []
    ],
    // O
    [
        [[0, -1], [1, -1], [0, 0], [1, 0]],
        // [][]
        // <>[]
        [[0, 0], [1, 0], [0, 1], [1, 1]],
        // <>[]
        // [][]
        [[-1, 0], [0, 0], [-1, 1], [0, 1]],
        // []<>
        // [][]
        [[-1, -1], [0, -1], [-1, 0], [0, 0]]
        // [][]
        // []<>
    ],
    // S
    [
        [[0, -1], [1, -1], [-1, 0], [0, 0]],
        //   [][]
        // []<>
        [[0, -1], [0, 0], [1, 0], [1, 1]],
        // []
        // <>[]
        //   []
        [[0, 0], [1, 0], [-1, 1], [0, 1]],
        //   <>[]
        // [][]
        [[-1, -1], [-1, 0], [0, 0], [0, 1]]
        // []
        // []<>
        //   []
    ],
    // Z
    [
        [[-1, -1], [0, -1], [0, 0], [1, 0]],
        // [][]
        //   <>[]
        [[1, -1], [0, 0], [1, 0], [0, 1]],
        //   []
        // <>[]
        // []
        [[-1, 0], [0, 0], [0, 1], [1, 1]],
        // []<>
        //   [][]
        [[0, -1], [-1, 0], [0, 0], [-1, 1]]
        //   []
        // []<>
        // []
    ],
];

const kicks_2x3 = [
    // Spawn
    [[ 0, 0], [ 0, 0], [ 0, 0], [ 0, 0], [ 0, 0]],
    // CW
    [[ 0, 0], [ 1, 0], [ 1,-1], [ 0, 2], [ 1, 2]],
    // 180
    [[ 0, 0], [ 0, 0], [ 0, 0], [ 0, 0], [ 0, 0]],
    // CCW
    [[ 0, 0], [-1, 0], [-1,-1], [ 0, 2], [-1, 2]]
];

const kicks_1x4 = [
    // Spawn
    [[ 0, 0], [-1, 0], [ 2, 0], [-1, 0], [ 2, 0]],
    // CW
    [[-1, 0], [ 0, 0], [ 0, 0], [ 0, 1], [ 0,-2]],
    // 180
    [[-1, 1], [ 1, 1], [-2, 1], [ 1, 0], [-2, 0]],
    // CCW
    [[ 0, 1], [ 0, 1], [ 0, 1], [ 0,-1], [ 0, 2]]
];

const kicks_2x2 = [
    // Spawn
    [[ 0, 0]],
    // CW
    [[ 0,-1]],
    // 180
    [[-1,-1]],
    // CCW
    [[-1, 0]]
];

const kicks_180_2x3 = [
    // Spawn
    [[0, 0], [0, 1]],
    // CW
    [[0, 0], [1, 0]],
    // 180
    [[0, 0], [0, 0]],
    // CCW
    [[0, 0], [0, 0]]
];

const kicks_180_1x4 = [
    // Spawn
    [[ 1, -1], [1,  0]],
    // CW
    [[-1, -1], [0, -1]],
    // 180
    [[ 0,  0], [0,  0]],
    // CCW
    [[ 0,  0], [0,  0]]
];

const kicks_180_2x2 = [
    // Spawn
    [[1, 1]],
    // CW
    [[1, -1]],
    // 180
    [[0, 0]],
    // CCW
    [[0, 0]]
];

// TIJLOSZ order
const color_table = [
    "#2e3440",
    "#b48ead",
    "#88C0D0",
    "#5e81ac",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#bf616a"
];

function get_color(piece) {
    return color_table[piece];
}

function spin_cw(rotation) {
    return (rotation + 1 % 4);
}

function spin_180(rotation) {
    return (rotation + 2 % 4);
}

function spin_ccw(rotation) {
    return (rotation + 3 % 4);
}

function get_offsets(piece, rotation) {
    return offsets[piece][rotation]
}
